<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Essysessentials ‚Äî Shop</title>

  <!-- styles + script (script.js will be provided next) -->
  <link rel="stylesheet" href="styles.css" />
  <script defer type="module" src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body data-page="store">

  <!-- Announcement banner (bold inside shop) -->
  <div id="announcementBanner" class="announcement-banner" role="region" aria-live="polite">
    <!-- Filled from JS (admin text) -->
  </div>

  <!-- Header -->
  <header class="header">
    <div class="brand">
      <img id="storeLogo" class="logo" src="assets/logo.jpg" alt="Essysessentials logo" />
      <div class="brand-text">
        <div id="storeName" class="store-name">Essysessentials</div>
        <div id="storeTag" class="muted">Quality essentials for everyday</div>
      </div>
    </div>

    <div class="header-actions">
      <div class="left-actions">
        <button id="accountBtn" class="icon-btn account" aria-label="Account">üë§</button>
      </div>

      <div class="search-area">
        <input id="searchInput" class="search" type="search" placeholder="Search products..." aria-label="Search products" />
      </div>

      <div class="right-actions">
        <select id="collectionFilter" class="select" aria-label="Browse collections">
          <option value="">All collections</option>
        </select>

        <button id="cartBtn" class="icon-btn" aria-label="Cart">
          üõí <span id="cartCount" class="badge">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main class="container">
    <!-- Collections browse list (clickable) -->
    <section id="collectionsList" class="collections">
      <!-- Filled by script.js -->
    </section>

    <!-- Announcement (bold in page; same as banner but larger) -->
    <section id="announcementBlock" class="announcement-block">
      <!-- JS fills this -->
    </section>

    <!-- Products grid -->
    <section id="productsGrid" class="grid" aria-live="polite">
      <!-- Product cards inserted by script.js -->
    </section>
  </main>

  <!-- Product modal (carousel left/right, thumbs, options) -->
  <dialog id="productModal" class="modal">
    <form method="dialog" class="modal-card" id="productModalForm">
      <button class="close" value="close" aria-label="Close product">‚úï</button>

      <div class="modal-body">
        <div class="modal-media">
          <div class="carousel">
            <button id="pmPrev" class="carousel-btn" type="button" aria-label="Previous image">‚Äπ</button>
            <img id="pmImage" class="modal-image" alt="Product image" src="assets/placeholder.jpg" />
            <button id="pmNext" class="carousel-btn" type="button" aria-label="Next image">‚Ä∫</button>
          </div>
          <div id="pmThumbs" class="thumbs" aria-hidden="false"></div>
        </div>

        <div class="modal-info">
          <h3 id="pmName"></h3>
          <div id="pmPrice" class="price"></div>
          <p id="pmDesc"></p>
          <div id="pmStockWrap" class="stock-wrap"></div>

          <div id="pmColors" class="options" aria-label="Colors"></div>
          <div id="pmSizes" class="options" aria-label="Sizes"></div>

          <div class="qty-row">
            <button type="button" class="qty-btn" data-action="dec" aria-label="Decrease">‚àí</button>
            <input id="pmQty" class="qty" type="number" min="1" value="1" aria-label="Quantity" />
            <button type="button" class="qty-btn" data-action="inc" aria-label="Increase">+</button>
          </div>

          <div class="row" style="gap:8px">
            <button id="pmAddToCart" type="button" class="btn primary">Add to cart</button>
            <button id="pmBuyNow" type="button" class="btn">Buy now</button>
          </div>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Toast (added to cart confirmations etc.) -->
  <div id="toast" class="toast" aria-live="polite" role="status"></div>

  <!-- Cart Modal -->
  <dialog id="cartModal" class="modal large">
    <form method="dialog" class="modal-card">
      <button class="close" value="close" aria-label="Close cart">‚úï</button>
      <h3>Your cart</h3>

      <div id="cartItems" class="cart-items"></div>

      <div id="cartEmpty" class="empty">
        <p>Your cart is currently empty</p>
        <button id="returnToShop" class="btn">Return to shop</button>
      </div>

      <div class="cart-actions">
        <div class="row">
          <button id="clearCartBtn" type="button" class="btn subtle">Clear cart</button>
          <div class="summary">
            <div class="row"><span>Subtotal</span><strong id="cartSubtotal">‚Ç¶0</strong></div>
            <div style="margin-top:10px" class="row">
              <button id="continueShopping" type="button" class="btn">Continue shopping</button>
              <button id="proceedToCheckout" type="button" class="btn primary">Proceed to Checkout</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Checkout Modal (spacious, scrollable) -->
  <dialog id="checkoutModal" class="modal large scrollable">
    <form id="checkoutForm" class="modal-card" method="dialog">
      <button class="close" value="close" aria-label="Close checkout">‚úï</button>
      <button id="backToCart" type="button" class="btn subtle">‚Üê Back to cart</button>

      <h3>Checkout</h3>

      <section class="checkout-section">
        <h4>Customer details</h4>
        <input required name="name" placeholder="Full name" />
        <input required name="email" type="email" placeholder="Email" />
        <input required name="phone" placeholder="Phone number" />
        <textarea required name="address" placeholder="Delivery address (Street, City, State)"></textarea>
      </section>

      <section class="checkout-section">
        <h4>Shipping method</h4>
        <div id="shippingBlocks" class="shipping-blocks"></div>
        <div id="customAddressWrap" style="display:none;margin-top:8px;">
          <label>Enter custom address (if not listed)</label>
          <textarea name="customAddress" placeholder="Type address for admin to review"></textarea>
        </div>
      </section>

      <section class="checkout-section" id="paymentSection">
        <h4>Payment</h4>
        <div id="bankDetails" class="bank"></div>
        <div class="row" style="gap:8px;align-items:center">
          <input id="bankAccountNumber" readonly />
          <button id="copyAccountBtn" type="button" class="btn">Copy account</button>
        </div>
        <label>Upload payment proof (required unless Address not listed or Stockpile)</label>
        <input id="paymentProofInput" type="file" accept="image/*" />
      </section>

      <section class="checkout-summary">
        <div class="row"><span>Subtotal:</span><strong id="summarySubtotal">‚Ç¶0</strong></div>
        <div class="row"><span>Shipping:</span><strong id="summaryShipping">‚Ç¶0</strong></div>
        <div class="row total"><span>Total:</span><strong id="summaryTotal">‚Ç¶0</strong></div>
        <div style="margin-top:12px">
          <button id="placeOrderBtn" type="submit" class="btn primary">Place order</button>
        </div>
      </section>
    </form>
  </dialog>

  <!-- Announcement popup (shows once per visit like Bumpa) -->
  <dialog id="popupModal" class="modal small">
    <form id="popupForm" method="dialog" class="modal-card">
      <button class="close" value="close" aria-label="Close popup">‚úï</button>
      <h3 id="popupTitle">Announcement</h3>
      <p id="popupBody">This is an important message</p>

      <div id="popupFormFields" class="popup-fields">
        <input id="popupName" name="popupName" placeholder="Full name" />
        <input id="popupEmail" name="popupEmail" type="email" placeholder="Email address" />
        <input id="popupPhone" name="popupPhone" placeholder="Phone (optional)" />
        <div style="margin-top:8px">
          <button id="popupSubmit" type="button" class="btn primary">Sign Up</button>
          <button id="popupSkip" type="button" class="btn subtle">Skip</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Footer -->
  <footer class="footer">
    <div class="contact">
      <h4>Contact us</h4>
      <p>Email: <a id="contactEmail" href="mailto:">‚Äî</a></p>
      <p>Phone: <a id="contactPhone" href="tel:">‚Äî</a></p>
    </div>
    <small>¬© <span id="year"></span> <span id="footerStoreName">Essysessentials</span>. All rights reserved.</small>
  </footer>

  <!-- WhatsApp floating icon bottom-right -->
  <a id="waFloat" class="wa-float" target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
    <img src="assets/whatsapp.jpg" alt="WhatsApp" />
  </a>

  <!-- small account menu (hidden, toggled by account button) -->
  <div id="accountMenu" class="account-menu" hidden>
    <div id="accountMenuInner">
      <button id="loginBtn" class="btn">Login</button>
      <button id="signupBtn" class="btn">Create account</button>
      <button id="ordersLink" class="btn">My orders</button>
    </div>
  </div>

</body>
</html>
