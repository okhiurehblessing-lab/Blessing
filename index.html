<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Essysessentials â€“ Store</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer type="module" src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body data-page="store">
  <!-- Announcement -->
  <div id="announcementBar" class="announcement"></div>

  <!-- Header -->
  <header class="header">
    <div class="brand">
      <img id="storeLogo" class="logo" alt="logo" src="assets/logo.jpg" />
      <div>
        <h1 id="storeName">Essysessentials</h1>
        <small id="storeTag" class="muted">Quality essentials for everyday</small>
      </div>
    </div>

    <div class="header-actions">
      <input id="searchInput" class="search" type="search" placeholder="Search products..." />
      <select id="collectionFilter" class="select">
        <option value="">All collections</option>
      </select>
      <button id="cartBtn" class="icon-btn" aria-label="Cart">
        ðŸ›’ <span id="cartCount" class="badge">0</span>
      </button>
    </div>
  </header>

  <!-- Products -->
  <main class="container">
    <section id="productsGrid" class="grid"></section>
  </main>

  <!-- Product details -->
  <dialog id="productModal" class="modal">
    <form method="dialog" class="modal-card" id="productModalForm">
      <button class="close" value="close" aria-label="Close">âœ•</button>
      <div class="modal-body">
        <div class="modal-media">
          <img id="pmImage" class="modal-image" alt="product image" />
          <div id="pmThumbs" class="thumbs"></div>
        </div>
        <div class="modal-info">
          <h3 id="pmName"></h3>
          <p id="pmPrice" class="price"></p>
          <p id="pmDesc"></p>
          <div id="pmStockWrap" class="stock-wrap"></div>

          <div id="pmColors" class="options"></div>
          <div id="pmSizes" class="options"></div>

          <div class="qty-row">
            <button type="button" class="qty-btn" data-action="dec">âˆ’</button>
            <input id="pmQty" class="qty" type="number" min="1" value="1" />
            <button type="button" class="qty-btn" data-action="inc">+</button>
          </div>

          <button type="button" id="pmAddToCart" class="btn primary">Add to cart</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Cart (always opens even if empty) -->
  <dialog id="cartModal" class="modal">
    <form method="dialog" class="modal-card">
      <button class="close" value="close" aria-label="Close">âœ•</button>
      <h3>Your Cart</h3>
      <div id="cartItems"></div>
      <div id="cartEmpty" class="empty">
        <p>Your cart is currently empty.</p>
        <button id="returnToShop" class="btn">Return to shop</button>
      </div>
      <div class="cart-summary">
        <div class="row"><span>Subtotal:</span><strong id="cartSubtotal">â‚¦0</strong></div>
        <button id="proceedToCheckout" type="button" class="btn primary">Proceed to Checkout</button>
      </div>
    </form>
  </dialog>

  <!-- Checkout -->
  <dialog id="checkoutModal" class="modal">
    <form method="dialog" class="modal-card" id="checkoutForm">
      <button class="close" value="close" aria-label="Close">âœ•</button>
      <h3>Checkout</h3>

      <fieldset class="group">
        <legend>Customer details</legend>
        <input required name="name" placeholder="Full name" />
        <input required name="email" type="email" placeholder="Email" />
        <input required name="phone" placeholder="Phone number" />
        <textarea required name="address" placeholder="Delivery address (Street, City, State, Country)"></textarea>
      </fieldset>

      <fieldset class="group">
        <legend>Shipping</legend>
        <div class="radio-col" id="shippingMethods">
          <!-- Notes injected from admin Settings -->
          <label><input type="radio" name="shippingMethod" value="standard" checked /> Standard Delivery</label>
          <small id="note-standard" class="note"></small>

          <label><input type="radio" name="shippingMethod" value="express" /> Express Delivery</label>
          <small id="note-express" class="note"></small>

          <label><input type="radio" name="shippingMethod" value="pickup" /> Pickup</label>
          <small id="note-pickup" class="note"></small>

          <label><input type="radio" name="shippingMethod" value="address_not_listed" /> Address not listed</label>
          <small id="note-address_not_listed" class="note"></small>

          <label><input type="radio" name="shippingMethod" value="stockpile" /> Stockpile (save for later)</label>
          <small id="note-stockpile" class="note"></small>
        </div>

        <label class="label">Zone (fees set by admin)</label>
        <select id="shippingZone" name="shippingZone" class="select"></select>

        <div class="row"><span>Shipping fee:</span><strong id="shippingFeeDisplay">â‚¦0</strong></div>
      </fieldset>

      <fieldset class="group" id="paymentProofGroup">
        <legend>Payment</legend>
        <div id="bankDetails" class="bank"></div>
        <label class="label">Upload payment proof (required unless Address not listed or Stockpile)</label>
        <input id="paymentProofInput" type="file" accept="image/*" />
      </fieldset>

      <div class="cart-summary">
        <div class="row"><span>Subtotal:</span><strong id="summarySubtotal">â‚¦0</strong></div>
        <div class="row"><span>Shipping:</span><strong id="summaryShipping">â‚¦0</strong></div>
        <div class="row total"><span>Total:</span><strong id="summaryTotal">â‚¦0</strong></div>
        <button id="placeOrderBtn" type="submit" class="btn primary">Place order</button>
      </div>
    </form>
  </dialog>

  <!-- Footer -->
  <footer class="footer">
    <div class="contact">
      <h4>Contact us</h4>
      <p>Email: <a id="contactEmail" href="mailto:">â€”</a></p>
      <p>Phone: <a id="contactPhone" href="tel:">â€”</a></p>
    </div>
    <small>Â© <span id="year"></span> <span id="footerStoreName">Essysessentials</span>. All rights reserved.</small>
  </footer>

  <!-- WhatsApp floating -->
  <a id="waFloat" class="wa-float" target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
    <img src="assets/whatsapp.jpg" alt="WhatsApp" />
  </a>
</body>
</html>
