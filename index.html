<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Essysessentials ‚Äî Store</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer type="module" src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body data-page="store">
  <div id="announcementBar" class="announcement"></div>

  <header class="header">
    <div class="brand">
      <img id="storeLogo" class="logo" src="assets/logo.jpg" alt="logo" />
      <div class="brand-text">
        <div id="storeName" class="store-name">Essysessentials</div>
        <div id="storeTag" class="muted">Quality essentials for everyday</div>
      </div>
    </div>

    <div class="header-actions">
      <input id="searchInput" class="search" type="search" placeholder="Search products..." />
      <select id="collectionFilter" class="select">
        <option value="">All categories</option>
      </select>
      <button id="cartBtn" class="icon-btn" aria-label="Cart">üõí <span id="cartCount" class="badge">0</span></button>
    </div>
  </header>

  <main class="container">
    <section id="productsGrid" class="grid"></section>
  </main>

  <!-- Product details modal -->
  <dialog id="productModal" class="modal">
    <form method="dialog" class="modal-card" id="productModalForm">
      <button class="close" value="close" aria-label="Close">‚úï</button>
      <div class="modal-body">
        <div class="modal-media">
          <img id="pmImage" class="modal-image" alt="product image" src="assets/placeholder.jpg"/>
          <div id="pmThumbs" class="thumbs"></div>
        </div>
        <div class="modal-info">
          <h3 id="pmName"></h3>
          <div id="pmPrice" class="price"></div>
          <p id="pmDesc"></p>
          <div id="pmStockWrap" class="stock-wrap"></div>

          <div id="pmColors" class="options"></div>
          <div id="pmSizes" class="options"></div>

          <div class="qty-row">
            <button type="button" class="qty-btn" data-action="dec">‚àí</button>
            <input id="pmQty" class="qty" type="number" min="1" value="1" />
            <button type="button" class="qty-btn" data-action="inc">+</button>
          </div>

          <button type="button" id="pmAddToCart" class="btn primary">Add to cart</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Cart modal (always opens) -->
  <dialog id="cartModal" class="modal">
    <form method="dialog" class="modal-card">
      <button class="close" value="close" aria-label="Close">‚úï</button>
      <h3>Your cart</h3>
      <div id="cartItems" class="cart-items"></div>
      <div id="cartEmpty" class="empty">
        <p>Your cart is currently empty</p>
        <button id="returnToShop" class="btn">Return to shop</button>
      </div>

      <div class="cart-summary">
        <div class="row"><span>Subtotal:</span><strong id="cartSubtotal">‚Ç¶0</strong></div>
        <div class="row actions">
          <button id="continueShopping" type="button" class="btn">Continue shopping</button>
          <button id="proceedToCheckout" type="button" class="btn primary">Proceed to Checkout</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Checkout page-style dialog (scrollable, larger) -->
  <dialog id="checkoutModal" class="modal large">
    <form id="checkoutForm" class="modal-card" method="dialog">
      <button class="close" value="close" aria-label="Close">‚úï</button>
      <button id="backToCart" type="button" class="btn subtle">‚Üê Back to cart</button>

      <h3>Checkout</h3>
      <section class="checkout-section">
        <h4>Customer details</h4>
        <input required name="name" placeholder="Full name" />
        <input required name="email" type="email" placeholder="Email" />
        <input required name="phone" placeholder="Phone number" />
        <textarea required name="address" placeholder="Delivery address (Street, City, State, Country)"></textarea>
      </section>

      <section class="checkout-section">
        <h4>Shipping method</h4>
        <div id="shippingBlocks" class="shipping-blocks"></div>
        <div id="customAddressWrap" style="display:none;margin-top:8px;">
          <label>Enter custom address (if not listed)</label>
          <textarea name="customAddress" placeholder="Type address for admin to review"></textarea>
        </div>
      </section>

      <section class="checkout-section" id="paymentSection">
        <h4>Payment</h4>
        <div id="bankDetails" class="bank"></div>
        <label>Upload payment proof (required unless Address not listed or Stockpile)</label>
        <input id="paymentProofInput" type="file" accept="image/*" />
      </section>

      <section class="checkout-summary">
        <div class="row"><span>Subtotal:</span><strong id="summarySubtotal">‚Ç¶0</strong></div>
        <div class="row"><span>Shipping:</span><strong id="summaryShipping">‚Ç¶0</strong></div>
        <div class="row total"><span>Total:</span><strong id="summaryTotal">‚Ç¶0</strong></div>
        <button id="placeOrderBtn" type="submit" class="btn primary">Place order</button>
      </section>
    </form>
  </dialog>

  <footer class="footer">
    <div class="contact">
      <h4>Contact us</h4>
      <p>Email: <a id="contactEmail" href="mailto:">‚Äî</a></p>
      <p>Phone: <a id="contactPhone" href="tel:">‚Äî</a></p>
    </div>
    <small>¬© <span id="year"></span> <span id="footerStoreName">Essysessentials</span>. All rights reserved.</small>
  </footer>

  <a id="waFloat" class="wa-float" target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
    <img src="assets/whatsapp.jpg" alt="WhatsApp" />
  </a>

</body>
</html>
